{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "width": "container",
  "height": 240,
  "autosize": {"type": "fit", "contains": "padding"},
  "title": "Immigration Trends to Australia by Top Countries (2015â€“2023)",
  "data": {"url": "data/top5_population_change.csv"},

  "params": [
    {
      "name": "CountrySel",
      "value": "All",
      "bind": {
        "input": "select",
        "name": "Country: ",
        "options": ["All", "India", "China", "Philippines", "United Kingdom", "New Zealand"]
      }
    }
  ],

  "transform": [
    {
      "fold": ["England", "India", "China", "New Zealand", "Philippines"],
      "as": ["country", "immigrants"]
    },
    { "calculate": "datum.country == 'England' ? 'United Kingdom' : datum.country", "as": "country" },
    { "filter": "CountrySel == 'All' || datum.country == CountrySel" }
  ],

  "mark": {"type": "line"},

  "encoding": {
    "x": {
      "field": "Year",
      "type": "quantitative",
      "title": "Year"
    },
    "y": {
      "field": "immigrants",
      "type": "quantitative",
      "axis": {"format": ",.0f"},
      "title": "Number of People",
      "scale": {"zero": false}
    },
    "color": {
      "field": "country",
      "type": "nominal",
      "title": "Country",
      "scale": {
        "domain": ["India", "China", "Philippines", "United Kingdom", "New Zealand"],
        "range": ["#e41a1c", "#377eb8", "#4daf4a", "#984ea3", "#ff7f00"]
      },
      "legend": {"orient": "right"}
    },
    "tooltip": [
      {"field": "Year", "type": "quantitative", "title": "Year"},
      {"field": "country", "type": "nominal", "title": "Country"},
      {"field": "immigrants", "type": "quantitative", "title": "People", "format": ",.0f"}
    ],
    "opacity": {
      "condition": {"test": "CountrySel == 'All' || datum.country == CountrySel", "value": 1},
      "value": 0.25
    }
  }
}
